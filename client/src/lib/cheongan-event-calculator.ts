// 천간 이벤트 계산기
// 대운의 천간과 사주원국 천간의 관계를 계산

export type CheonganEvent = 
  | '비화' | '비화합' | '목생화' | '목생화' | '갑무충' | '갑기합' | '갑경충' | '휴수극' | '설기'
  | '을기충' | '을경합' | '을신충'
  | '병경충' | '병신합' | '병임충'
  | '정신충' | '정임합' | '정계충' | '필요극'
  | '무갑충' | '무임충' | '무계합'
  | '기갑합' | '기을충' | '기계충'
  | '경갑충' | '경을합' | '경정극'
  | '신병합' | '신정충'
  | '수생목' | '임병충' | '임정합' | '임무충'
  | '계정충' | '계무합' | '계기충'
  | '화생토' | '토생금' | '금생수';

const CHEONGAN_EVENT_MAP: Record<string, Record<string, CheonganEvent>> = {
  '甲': {
    '甲': '비화',
    '乙': '비화합',
    '丙': '목생화',
    '丁': '목생화',
    '戊': '갑무충',
    '己': '갑기합',
    '庚': '갑경충',
    '辛': '휴수극',
    '壬': '설기',
    '癸': '설기'
  },
  '乙': {
    '甲': '비화합',
    '乙': '비화',
    '丙': '목생화',
    '丁': '목생화',
    '戊': '휴수극',
    '己': '을기충',
    '庚': '을경합',
    '辛': '을신충',
    '壬': '설기',
    '癸': '설기'
  },
  '丙': {
    '甲': '설기',
    '乙': '설기',
    '丙': '비화',
    '丁': '비화합',
    '戊': '화생토',
    '己': '화생토',
    '庚': '병경충',
    '辛': '병신합',
    '壬': '병임충',
    '癸': '휴수극'
  },
  '丁': {
    '甲': '설기',
    '乙': '설기',
    '丙': '비화합',
    '丁': '비화',
    '戊': '화생토',
    '己': '화생토',
    '庚': '필요극',
    '辛': '정신충',
    '壬': '정임합',
    '癸': '정계충'
  },
  '戊': {
    '甲': '무갑충',
    '乙': '휴수극',
    '丙': '설기',
    '丁': '설기',
    '戊': '비화',
    '己': '비화합',
    '庚': '토생금',
    '辛': '토생금',
    '壬': '무임충',
    '癸': '무계합'
  },
  '己': {
    '甲': '기갑합',
    '乙': '기을충',
    '丙': '설기',
    '丁': '설기',
    '戊': '비화합',
    '己': '비화',
    '庚': '토생금',
    '辛': '토생금',
    '壬': '휴수극',
    '癸': '기계충'
  },
  '庚': {
    '甲': '경갑충',
    '乙': '경을합',
    '丙': '병경충',
    '丁': '경정극',
    '戊': '설기',
    '己': '설기',
    '庚': '비화',
    '辛': '비화합',
    '壬': '금생수',
    '癸': '금생수'
  },
  '辛': {
    '甲': '휴수극',
    '乙': '을신충',
    '丙': '신병합',
    '丁': '신정충',
    '戊': '설기',
    '己': '설기',
    '庚': '비화합',
    '辛': '비화',
    '壬': '금생수',
    '癸': '금생수'
  },
  '壬': {
    '甲': '수생목',
    '乙': '수생목',
    '丙': '임병충',
    '丁': '임정합',
    '戊': '임무충',
    '己': '휴수극',
    '庚': '설기',
    '辛': '설기',
    '壬': '비화',
    '癸': '비화합'
  },
  '癸': {
    '甲': '수생목',
    '乙': '수생목',
    '丙': '휴수극',
    '丁': '계정충',
    '戊': '계무합',
    '己': '계기충',
    '庚': '설기',
    '辛': '설기',
    '壬': '비화합',
    '癸': '비화'
  }
};

/**
 * 대운 천간과 사주 천간의 이벤트를 계산
 * @param daeunSky - 대운의 천간 (예: '丁')
 * @param sajuSky - 사주원국의 천간 (예: '乙')
 * @returns 천간 이벤트 (예: '설기')
 */
export function calculateCheonganEvent(daeunSky: string, sajuSky: string): CheonganEvent {
  if (!CHEONGAN_EVENT_MAP[daeunSky]) {
    return '비화'; // 기본값
  }
  
  return CHEONGAN_EVENT_MAP[daeunSky][sajuSky] || '비화';
}
