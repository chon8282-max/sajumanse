// 지지 간의 관계 매핑 (12지지 × 12지지)
// 한자와 한글 매핑

export const EARTHLY_BRANCH_RELATIONS: Record<string, Record<string, string[]>> = {
  '子': {
    '子': [],
    '丑': ['六合', '方合'],
    '寅': ['隔角', '相門殺', '水生木'],
    '卯': ['刑', '水生木'],
    '辰': ['三合', '水生木', '華蓋殺'],
    '巳': ['剋'],
    '午': ['沖'],
    '未': ['怨嗔殺'],
    '申': ['三合'],
    '酉': ['破', '鬼門', '桃花殺'],
    '戌': ['隔角', '弔客殺'],
    '亥': ['方合']
  },
  '丑': {
    '子': ['六合'],
    '丑': ['華蓋殺'],
    '寅': ['暗合', '水生木'],
    '卯': ['水生木', '隔角', '相門殺'],
    '辰': ['破', '水生木'],
    '巳': ['剋'],
    '午': ['怨嗔殺', '鬼門殺', '桃花殺'],
    '未': ['沖', '刑'],
    '申': ['入墓'],
    '酉': ['合'],
    '戌': ['刑'],
    '亥': ['隔角', '弔客殺']
  },
  '寅': {
    '子': ['隔角', '弔客殺'],
    '丑': ['暗合'],
    '寅': [],
    '卯': ['方合', '桃花殺'],
    '辰': ['隔角', '相門殺'],
    '巳': ['刑', '木生火'],
    '午': ['合', '木生火'],
    '未': ['木生火', '鬼門殺'],
    '申': ['沖', '刑'],
    '酉': ['怨嗔殺'],
    '戌': ['剋', '華蓋殺'],
    '亥': ['合', '破']
  },
  '卯': {
    '子': ['刑', '桃花殺'],
    '丑': ['隔角', '弔客殺'],
    '寅': ['方合'],
    '卯': [],
    '辰': ['方合'],
    '巳': ['隔角', '相門殺', '木生火'],
    '午': ['破', '木生火'],
    '未': ['三合', '華蓋殺', '木生火'],
    '申': ['奇門殺', '怨嗔殺'],
    '酉': ['沖'],
    '戌': ['六合'],
    '亥': ['三合']
  },
  '辰': {
    '子': ['三合'],
    '丑': ['破'],
    '寅': ['隔角', '弔客殺'],
    '卯': ['方合'],
    '辰': ['自刑', '華蓋殺'],
    '巳': ['暗合'],
    '午': ['隔角', '相門殺', '木生火'],
    '未': ['木生火'],
    '申': ['剋'],
    '酉': ['六合', '桃花殺'],
    '戌': ['沖'],
    '亥': ['怨嗔殺', '鬼門殺', '入墓']
  },
  '巳': {
    '子': ['剋'],
    '丑': ['剋', '華蓋殺'],
    '寅': ['刑'],
    '卯': ['隔角', '相門殺'],
    '辰': ['暗合'],
    '巳': [],
    '午': ['方合', '桃花殺'],
    '未': ['隔角', '弔客殺'],
    '申': ['六合', '刑', '破', '火剋金'],
    '酉': ['三合', '火剋金'],
    '戌': ['怨嗔殺', '鬼門殺', '火剋金'],
    '亥': ['沖']
  },
  '午': {
    '子': ['沖'],
    '丑': ['怨嗔殺', '鬼門殺'],
    '寅': ['三合'],
    '卯': ['破', '桃花殺'],
    '辰': ['隔角', '弔客殺'],
    '巳': ['方合'],
    '午': ['自刑'],
    '未': ['方合'],
    '申': ['隔角', '相門殺'],
    '酉': ['火剋金'],
    '戌': ['三合', '華蓋殺', '火剋金'],
    '亥': ['剋']
  },
  '未': {
    '子': ['怨嗔殺', '桃花殺'],
    '丑': ['沖'],
    '寅': ['鬼門殺', '入墓'],
    '卯': ['三合'],
    '辰': [],
    '巳': ['隔角', '弔客殺'],
    '午': ['方合'],
    '未': ['華蓋殺'],
    '申': ['暗合', '火剋金'],
    '酉': ['隔角', '相門殺', '火剋金'],
    '戌': ['刑', '破', '火剋金'],
    '亥': ['剋']
  },
  '申': {
    '子': ['三合'],
    '丑': ['金生水'],
    '寅': ['沖'],
    '卯': ['怨嗔殺', '鬼門殺'],
    '辰': ['剋', '華蓋殺'],
    '巳': ['合', '破'],
    '午': ['隔角', '弔客殺'],
    '未': ['方合'],
    '申': [],
    '酉': ['方合', '桃花殺'],
    '戌': ['隔角', '相門殺'],
    '亥': ['金生水']
  },
  '酉': {
    '子': ['破', '奇門殺', '金生水'],
    '丑': ['三合', '華蓋殺'],
    '寅': ['怨嗔殺'],
    '卯': ['沖'],
    '辰': ['六合'],
    '巳': ['三合'],
    '午': ['桃花殺'],
    '未': ['隔角', '弔客殺'],
    '申': ['方合'],
    '酉': ['自刑'],
    '戌': ['方合'],
    '亥': ['金生水']
  },
  '戌': {
    '子': ['隔角', '相門殺', '金生水'],
    '丑': ['刑', '金生水'],
    '寅': ['剋'],
    '卯': ['六合', '桃花殺'],
    '辰': ['沖'],
    '巳': ['怨嗔殺', '奇門殺'],
    '午': ['三合'],
    '未': ['刑', '破'],
    '申': ['隔角', '弔客殺'],
    '酉': ['方合'],
    '戌': ['華蓋殺'],
    '亥': ['暗合', '金生水']
  },
  '亥': {
    '子': ['方合', '桃花殺'],
    '丑': ['隔角', '相門殺'],
    '寅': ['合', '破', '水生木'],
    '卯': ['三合'],
    '辰': ['怨嗔殺', '鬼門殺', '水生木'],
    '巳': ['沖'],
    '午': ['剋'],
    '未': ['剋', '華蓋殺'],
    '申': [],
    '酉': ['隔角', '弔客殺'],
    '戌': ['暗合'],
    '亥': ['自刑']
  }
};

// 한자 -> 한글 매핑
export const RELATION_KOREAN_MAP: Record<string, string> = {
  '六合': '육합',
  '方合': '방합',
  '三合': '삼합',
  '沖': '충',
  '刑': '형',
  '破': '파',
  '剋': '극',
  '隔角': '격각',
  '相門殺': '상문살',
  '弔客殺': '조객살',
  '鬼門殺': '귀문살',
  '桃花殺': '도화살',
  '華蓋殺': '화개살',
  '怨嗔殺': '원진살',
  '奇門殺': '기문살',
  '入墓': '입묘',
  '暗合': '암합',
  '自刑': '자형',
  '水生木': '수생목',
  '木生火': '목생화',
  '火剋金': '화극금',
  '金生水': '금생수'
};

// 한글 -> 한자 매핑 (역변환용)
export const RELATION_CHINESE_MAP: Record<string, string> = {
  '육합': '六合',
  '방합': '方合',
  '삼합': '三合',
  '충': '沖',
  '형': '刑',
  '파': '破',
  '극': '剋',
  '격각': '隔角',
  '상문살': '相門殺',
  '조객살': '弔客殺',
  '귀문살': '鬼門殺',
  '도화살': '桃花殺',
  '화개살': '華蓋殺',
  '원진살': '怨嗔殺',
  '기문살': '奇門殺',
  '입묘': '入墓',
  '암합': '暗合',
  '자형': '自刑',
  '수생목': '水生木',
  '목생화': '木生火',
  '화극금': '火剋金',
  '금생수': '金生水'
};

// 대운/세운 지지와 사주 지지 간의 관계 계산
export function calculateEarthlyBranchRelation(
  daeunOrSaeunEarth: string,
  sajuEarth: string
): string[] {
  const relations = EARTHLY_BRANCH_RELATIONS[daeunOrSaeunEarth]?.[sajuEarth] || [];
  return relations;
}

// 관계를 한글로 변환
export function convertRelationsToKorean(relations: string[]): string[] {
  return relations.map(rel => RELATION_KOREAN_MAP[rel] || rel);
}

// 관계를 한자로 변환 (한글 입력 시)
export function convertRelationsToChinese(relations: string[]): string[] {
  return relations.map(rel => RELATION_CHINESE_MAP[rel] || rel);
}
