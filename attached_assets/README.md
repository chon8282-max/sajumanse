# East Asia Calendar DB (1900–2100)

**구성물**
- `build_calendar_db.py`: 1900~2100년 **양력/음력(윤달 포함)**, **24절기 입절일·시각**을 계산/보정하여
  - `east_asia_calendar_1900_2100.sqlite` (SQLite)
  - `lunar_calendar_1900_2100.csv`
  - `solar_terms_24_1900_2100.csv`
  를 생성합니다.
- `sample_query.py`: DB 생성 후 예시 쿼리로 결과를 검증합니다.
- `requirements.txt`: 필요한 파이썬 패키지

**사용법 (Replit / 로컬)**
```bash
pip install -r requirements.txt
python build_calendar_db.py    # 데이터 생성 (수십 초~수 분)
python sample_query.py         # 생성물 확인
```

**알고리즘 개요**
- **음력/윤달:** `lunardate` 라이브러리(중국계 전통력, 1900~2100 범위) 기반으로 양↔음 변환 및 윤월 여부 산출.
  - 한국/중국 전통력의 월 건너뛰기 차이를 극미 조정해야 할 수 있으나, 1900–2100 기본 일치.
- **24절기:** `pymeeus`(Meeus 천문식)로 태양의 황경(λ☉)이 `0°,15°,30°,...,345°`가 되는 **TT(지구시)** 시각을 수치해 탐색.
  - **ΔT(지구시−세계시) 보정:** Espenak–Meeus 다항식을 사용하여 **UT1 ≈ UTC**로 환산. (1900–2100 평균 오차 수십 초~수 분)
  - **시간대:** CSV/DB에는 **UTC** 기준 ISO8601을 저장. 필요 시 현지 TZ로 변환하세요.

**주의**
- 본 코드는 오프라인 환경에서도 작동하도록 **내장 다항식**과 **Meeus 근사식**을 사용합니다. JPL DE/스카이필드 원천을 받지 않으므로,
  관측·국가기관 공표 시각과 **최대 수분 단위** 차이가 날 수 있습니다. (대부분 ±1분 이내 목표)
- 한국 천문연·중국 천문대 공표와 100% 동일 보장은 불가. 다만 Replit 환경에서 자동생성/검증 용도로 안정적입니다.

**라이선스**
MIT
